

<!DOCTYPE html>
<html class="writer-html5" lang="nl" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>uFactory Lite6 Robot Setup (ROS-Melodic versie) &mdash; Avans: my Ufactory lite6 workshop 0.1 documentatie</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=a57088fb"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script src="../_static/translations.js?v=e4d38c6a"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Zoeken" href="../search.html" />
    <link rel="prev" title="Welcome to uFactory Lite6 workshop (ROS-Melodic versie)" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Avans: my Ufactory lite6 workshop
              <img src="../_static/avans-hogeschool.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Zoek in documentatie" aria-label="Zoek in documentatie" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigatiemenu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">uFactory Lite6 Robot Setup (ROS-Melodic versie)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installatie-ros-base-packages">Installatie ROS Base Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#development-computer">Development-computer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#maken-van-de-workspace">Maken van de workspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installeren-van-benodigde-packages">Installeren van benodigde packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bouwen-van-de-workspace">Bouwen van de workspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ros-environment-setup">ROS Environment setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testen-setup-zonder-fysieke-robot">Testen setup zonder fysieke robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="#virtuele-machine-in-netwerk-connection-selecteren">Virtuele machine in Netwerk-connection selecteren</a></li>
<li class="toctree-l2"><a class="reference internal" href="#maken-verbinding-tussen-development-computer-en-de-ufactorylite6-robot">Maken verbinding tussen development-computer en de uFactoryLite6 robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="#robot-voorbereiden-na-transport">Robot voorbereiden, na transport</a></li>
<li class="toctree-l2"><a class="reference internal" href="#verbinding-maken-met-de-ufactorylite6-robot-starten-rviz">Verbinding maken met de uFactoryLite6 robot &amp; starten RVIZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reset-van-de-robot">Reset van de robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="#robot-description">Robot description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#robot-moveit-configuratie">Robot MoveIt-configuratie</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plaats-eigen-packages">Plaats eigen packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#backup-van-je-project">Backup van je project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#controle-van-bashrc">Controle van .bashrc</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#demonstratie-programmas">Demonstratie programma’s</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#python">Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="#c-flexbe">C++/FlexBe</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#eigen-programmas">Eigen programma’s</a></li>
<li class="toctree-l1"><a class="reference internal" href="#nadere-informatie">Nadere informatie</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Navigatiemenu voor mobiel" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Avans: my Ufactory lite6 workshop</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Paginanavigatie">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">uFactory Lite6 Robot Setup (ROS-Melodic versie)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/documentation/Ufactory_Lite6_Robot_Setup.md.txt" rel="nofollow"> Bekijk paginabron</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ufactory-lite6-robot-setup-ros-melodic-versie">
<h1>uFactory Lite6 Robot Setup (ROS-Melodic versie)<a class="headerlink" href="#ufactory-lite6-robot-setup-ros-melodic-versie" title="Link to this heading"></a></h1>
<p>In dit document is beschreven hoe de basis ROS software voor een uFactory Lite6 robot kan worden geïnstalleerd.</p>
<p>Voorbereiding
Voorafgaand aan deze setup dient het volgende geïnstalleerd te zijn:</p>
<ul class="simple">
<li><p>Ubuntu Bionic Beaver (18.04)</p></li>
<li><p>ROS Melodic</p></li>
<li><p>ROS Base Packages</p></li>
</ul>
<p><em>Let op: Volg nauwkeurig de instructies in de volgorde hier gegeven. Een verkeerde volgorde of het overslaan van handeling kan ervoor zorgen dat je setup van de uFactory Lite6 robot niet werkt!</em></p>
<section id="installatie-ros-base-packages">
<h2>Installatie ROS Base Packages<a class="headerlink" href="#installatie-ros-base-packages" title="Link to this heading"></a></h2>
<p><em>Deze handeling is alleen nodig als je zelf ROS-melodic hebt geinstalleerd. maak je gebruik van een voorgeconfigureerde Avans image dan is deze stap niet nodig</em></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/AvansMechatronica/ROS1_installers.git
<span class="nb">cd</span><span class="w"> </span>ROS1_installers
./install_ros_base_packages.bash
<span class="nb">cd</span><span class="w"> </span>..
rm<span class="w"> </span>-f<span class="w"> </span>-r<span class="w"> </span>installers
</pre></div>
</div>
</section>
<section id="development-computer">
<h2>Development-computer<a class="headerlink" href="#development-computer" title="Link to this heading"></a></h2>
<p>Als in dit document gesproken wordt over een development-computer dan wordt hiermee bedoeld de laptop/computer waarop je de software in ROS ontwikkelt.</p>
</section>
<section id="maken-van-de-workspace">
<h2>Maken van de workspace<a class="headerlink" href="#maken-van-de-workspace" title="Link to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span><span class="nv">$HOME</span>/ufactory_ws
mkdir<span class="w"> </span><span class="nv">$HOME</span>/ufactory_ws/src
<span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/ufactory_ws/src
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/AvansMechatronica/my_xarm_lite6.git
</pre></div>
</div>
<p>Opmerking: Je kunt de packages uit de gekloonde github repository gebruiken als template voor je eigen applicatie/project. De wijze van de package modificeren is verderop in dit document beschreven.</p>
</section>
<section id="installeren-van-benodigde-packages">
<h2>Installeren van benodigde packages<a class="headerlink" href="#installeren-van-benodigde-packages" title="Link to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/ufactory_ws/src/<span class="w"> </span>my_xarm_lite6/install
./install.bash
</pre></div>
</div>
</section>
<section id="bouwen-van-de-workspace">
<h2>Bouwen van de workspace<a class="headerlink" href="#bouwen-van-de-workspace" title="Link to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/ufactory_ws/
catkin<span class="w"> </span>b
</pre></div>
</div>
<p>p.s. als het bouwen niet goed lukt kun je het bouwen nogmaals starten door het “catkin b” commando (maximaal nog 1 keer extra proberen).</p>
</section>
<section id="ros-environment-setup">
<h2>ROS Environment setup<a class="headerlink" href="#ros-environment-setup" title="Link to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;source ~/ufactory_ws/devel/setup.bash&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
<span class="nb">source</span><span class="w"> </span>~/.bashrc
</pre></div>
</div>
<p>Je hoeft dit maar 1-malig te doen</p>
</section>
<section id="testen-setup-zonder-fysieke-robot">
<h2>Testen setup zonder fysieke robot<a class="headerlink" href="#testen-setup-zonder-fysieke-robot" title="Link to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>roslaunch<span class="w"> </span>my_lite6_moveit_config<span class="w"> </span>demo.launch
</pre></div>
</div>
</section>
<section id="virtuele-machine-in-netwerk-connection-selecteren">
<h2>Virtuele machine in Netwerk-connection selecteren<a class="headerlink" href="#virtuele-machine-in-netwerk-connection-selecteren" title="Link to this heading"></a></h2>
<p>Bij gebruik van virtuele-machine op development-computer, dient het netwerk is als “bridge” geconfigureerd te zijn. Glijd met je muis over de icoontjes, linksonder van de virtuele machine, totdat je “Network Adapter” zie verschijnen. Het type dient Bridged te zijn. Zie Afbeelding.
<img alt="image" src="../_images/Bridged1.png" /></p>
<p>Als dit niet het geval is click dan op het Network Adapter icoontje en selecteer “Settings”. Selecteer in het keuzemenu de optie “Bridged”.
<img alt="image" src="../_images/Bridged2.png" /></p>
</section>
<section id="maken-verbinding-tussen-development-computer-en-de-ufactorylite6-robot">
<h2>Maken verbinding tussen development-computer en de uFactoryLite6 robot<a class="headerlink" href="#maken-verbinding-tussen-development-computer-en-de-ufactorylite6-robot" title="Link to this heading"></a></h2>
<p>Verbind je development-computer met de uFactory Lite6 robot door middel van een CAT5-kabel en een router.</p>
<p><img alt="images" src="../_images/router1.jpg" />
<img alt="images" src="../_images/router2.jpg" /></p>
<p>Gebruik alleen de oranje poorten, bijvoorbeeld:</p>
<ul class="simple">
<li><p>Poort 1 naar de uFactory Lite6 robot</p></li>
<li><p>Poort 2 naar de development-computer</p></li>
</ul>
<p>Ps. De router dient geconfigureerd te zijn voor het subnet 192.168.1.x. Meestal is dat het geval, wanneer dit niet het geval is dien je de router opnieuw te configureren. Zoek op internet de juiste handleiding van de router en volg de instructies hiervan om de router te configureren. Indien nodig doe een systeem-reset met de resetknop van de router.</p>
<p><em>Let op: Gebruik geen WiFI naar de router, dit type verbindingen werken niet goed met een virtuele machine en een uFactory Lite6 robot.</em></p>
</section>
<section id="robot-voorbereiden-na-transport">
<h2>Robot voorbereiden, na transport<a class="headerlink" href="#robot-voorbereiden-na-transport" title="Link to this heading"></a></h2>
<p>Alvorens je de robot in ROS kunt gebruiken/aansturen dien je hem uit de transport stand te halen. Je kunt dit doen met een web-browser onder zowel windows als Linux/Ubuntu.
Open in de web-browser adres:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">robot</span><span class="o">-</span><span class="n">ip</span><span class="o">&gt;</span><span class="p">:</span><span class="mi">18333</span>
</pre></div>
</div>
<p>bv.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">192.168.2.12</span><span class="p">:</span><span class="mi">18333</span>
</pre></div>
</div>
<p><em>Note: <code class="docutils literal notranslate"><span class="pre">&lt;ip-adres&gt;</span></code> = Ip-adres op sticker achter op de robot.</em></p>
<p>Met de web-interface kun je dan de robot naar een begin/home positie handmatig bewegen.</p>
<p>Voordat je de robot wilt transporteren of inpakken dien je met deze web-interface de robot in de transport positie te plaatsen.</p>
</section>
<section id="verbinding-maken-met-de-ufactorylite6-robot-starten-rviz">
<h2>Verbinding maken met de uFactoryLite6 robot &amp; starten RVIZ<a class="headerlink" href="#verbinding-maken-met-de-ufactorylite6-robot-starten-rviz" title="Link to this heading"></a></h2>
<p>In terminal op development-computer:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>roslaunch<span class="w"> </span>my_demo<span class="w"> </span>environment.launch<span class="w"> </span>robot_ip:<span class="o">=</span>&lt;ip-adres&gt;
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">&lt;ip-adres&gt;</span></code> = Ip-adres op sticker achter op de robot.</p>
<p>Dit commando start tevens de move-group node.
Je kunt nu de robot bedienen vanuit RVIZ of je eigen geschreven software op de development-computer.</p>
<p><em>Let op: Voor je project dien je het volgende commando uit te voeren(bovenstaande applicatie is dan afgesloten).</em></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>roslaunch<span class="w"> </span>my_lite6_moveit_config<span class="w"> </span>realMove_exec.launch<span class="w"> </span>robot_ip:<span class="o">=</span>&lt;ip-adres&gt;
</pre></div>
</div>
</section>
<section id="reset-van-de-robot">
<h2>Reset van de robot<a class="headerlink" href="#reset-van-de-robot" title="Link to this heading"></a></h2>
<p>Als de robot op enigerlei wijze in een fout toestand komt kun je het volgende commando gebruiken om de robot te resetten.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rosservice<span class="w"> </span>call<span class="w"> </span>/ufactory/moveit_clear_err
</pre></div>
</div>
<p><em>Let op: Dit commando werkt alleen als de move-group node is opgestart.</em></p>
</section>
<section id="robot-description">
<h2>Robot description<a class="headerlink" href="#robot-description" title="Link to this heading"></a></h2>
<p>De URDF-beschrijving van de robot kun je vinden in de volgende map:
<strong>$HOME/ufactory_ws/src/my_xarm_lite6/my_lite6_description/urdf/</strong></p>
<p>In het bestand <em>“lite6_robot_urdf.xacro”</em> kun je eigen modellen aan de robot toevoegen.</p>
</section>
<section id="robot-moveit-configuratie">
<h2>Robot MoveIt-configuratie<a class="headerlink" href="#robot-moveit-configuratie" title="Link to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>roslaunch<span class="w"> </span>my_lite6_moveit_config<span class="w"> </span>setup_assistant.launch
</pre></div>
</div>
<p>Plaats van het “lite6_robot.srdf” bestand:</p>
<p><strong>$HOME/ufactory_ws/src/my_xarm_lite6/my_lite6_moveit_config/config</strong></p>
<p>Hierin kun je de configuratie van de robot bekijken en eventuele nieuwe “group_state” (robot_pose) aanmaken. Uiteraard kun je dit ook met de setup_assistant doen.</p>
<p><em>p.s Als je extra gripper group_state hebt aangemaakt met de moveIt asssitant dan dien je in deze group_states de joints met de naam “gripper_sub” te verwijderen.</em></p>
<p><em>Pas op: Gebruik de setup_assistant alleen voor het toevoegen van nieuwe “group_states” of het maken van een nieuwe collision matrix. Verander geen controller instellingen!!!</em></p>
</section>
<section id="plaats-eigen-packages">
<h2>Plaats eigen packages<a class="headerlink" href="#plaats-eigen-packages" title="Link to this heading"></a></h2>
<p>Je kunt eigen packages of packages van derden onder brengen in de map:</p>
<p><strong>$HOME/ufactory_ws/src/my_xarm_lite6</strong></p>
<p>Vergreet niet de packages te bouwen en te sourcen (gebeurt automatisch bij het openen van een terminal)</p>
</section>
<section id="backup-van-je-project">
<h2>Backup van je project<a class="headerlink" href="#backup-van-je-project" title="Link to this heading"></a></h2>
<p>Maak regelmatig een backup van je project. Je kunt dit door bijvoorbeeld een repository aan te maken bij Github.com. Dit maakt het je ook makkelijk om jullie werk met je groep te delen.</p>
<p>Alleen de bestanden in de volgende map zijn voor een backup van belang:</p>
<p><strong>$HOME/ufactory_ws/src/my_xarm_lite6</strong></p>
<p><em>p.s. Voordat je github gaat gebruiken moet je eenmalig het volgende commando uitvoeren (dit verwijdert de oude repository van AvansMechatronica uit je workspace).</em></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rm<span class="w"> </span>-f<span class="w"> </span>-r<span class="w"> </span><span class="nv">$HOME</span>/ufactory_ws/src/my_xarm_lite6/.git
</pre></div>
</div>
<p>Uitleg van Github valt buiten de lesstof.</p>
</section>
<section id="controle-van-bashrc">
<h2>Controle van .bashrc<a class="headerlink" href="#controle-van-bashrc" title="Link to this heading"></a></h2>
<p>In het bestand <em>$HOME/.bashrc</em> wordt de ROS environment van de ros workspace geactiveerd  door het <em>“source ./ufactory_ws/devel/setup.bash”</em> commando. Het kan zijn dat dit meerdere keren in het bestand voor komt. Je kunt dit controleren door het bestand te bekijken.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gedit<span class="w"> </span><span class="nv">$HOME</span>/.bashrc
</pre></div>
</div>
<p>Ga naar het einde van het bestand en verwijder elke “source” regel(duplicaten) die meerdere keren voor komt. Sla daarna het bestand op en sluit alle terminals alvorens je verder gaat.</p>
</section>
</section>
<section id="demonstratie-programmas">
<h1>Demonstratie programma’s<a class="headerlink" href="#demonstratie-programmas" title="Link to this heading"></a></h1>
<section id="python">
<h2>Python<a class="headerlink" href="#python" title="Link to this heading"></a></h2>
<p>In de git-hub repostory is een Python voorbeeldprogramma opgenomen in de package my_demo. Start daarvoor de robot eerst op volgens bovenstaande procedure. Je kunt de demosteratie-programma als volgt opstarten:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rosrun<span class="w"> </span>my_demo<span class="w"> </span>demo.py
</pre></div>
</div>
<p>Je kunt dit python programma gebruiken als inspiratiebron voor je eigen code.</p>
</section>
<section id="c-flexbe">
<h2>C++/FlexBe<a class="headerlink" href="#c-flexbe" title="Link to this heading"></a></h2>
<p>In het document MoveItDemonstator worden een tweetal geavanceerde demonstratie programma’s beschreven:</p>
<ul class="simple">
<li><p>C++ applicatie: gebouwd in object georiënteerde programmeertaal C++</p></li>
<li><p>FlexBE, applicatie: gebouwd met een grafische statemachine editor, Python kennis is vereist
Tevens worden hier een tweetal templates gepresenteerd die gebruikt kunnen worden als uitgangspunt voor een zelf te schrijven programma.</p></li>
</ul>
</section>
</section>
<section id="eigen-programmas">
<h1>Eigen programma’s<a class="headerlink" href="#eigen-programmas" title="Link to this heading"></a></h1>
<p>In het document MoveItExample worden templates beschreven waarin je een FlexBE of C++ programma kunt maken.</p>
</section>
<section id="nadere-informatie">
<h1>Nadere informatie<a class="headerlink" href="#nadere-informatie" title="Link to this heading"></a></h1>
<p>Raadplaag de volgende sites voor meer informatie:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/xArm-Developer/xarm_ros">arm_ros</a></p>
<ul>
<li><p><em>Let op: De beschrijving van commando’s is in de “xarm” namespace. In “onze” configuratie is de namespace “ufactory”</em></p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://www.ufactory.cc/lite-6-collaborative-robot/">uFactoryLite 6</a></p></li>
</ul>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Voettekst">
        <a href="../index.html" class="btn btn-neutral float-left" title="Welcome to uFactory Lite6 workshop (ROS-Melodic versie)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Vorige</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Avans ATIx: Gerard Harkema.</p>
  </div>

  Gebouwd met <a href="https://www.sphinx-doc.org/">Sphinx</a> met een
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thema</a>
    geleverd door <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>